<!DOCTYPE html>
<html>
    <head>
        <title>
            Pointers Considered Harmful
        </title>
    </head>

    <body>
        <em><b> Pointers Considered Harmful </b> by djf </em>
        
        <p>
            17 May 2019
        </p>

        <p>
            Do bear in mind that I am not, by any measure, an
            experienced programmer. I am only eighteen years
            old at the time of this writing; this necessarily
            imposes a cap on my experience with programming.
        </p>

        <p>
            Nevertheless, I have been growing increasingly
            familiar with medium-level programming languages
            (mostly C and C++ but also a little Rust) and I
            have <i> *gasp* </i> developed opinions about them.
        </p>

        <p>
            Simple DirectMedia Layer 2 is fantastic. It has made
            writing interactive animated graphics in C almost
            as easy as doing so with Pygame. But it has a huge
            problem: every time I run a program incorporating
            SDL2 in Valgrind, I find that it always leaks badly.
            I have a 
            <a href = "https://github.com/DanteFalzone0/djf-sdl-0/blob/master/rotatable_triangle.cpp">
                C++ program that just shows a triangle that
                can be rotated with keypresses
            </a>
            in which I make sure to call the SDL functions
            <code>SDL_DestroyRenderer()</code> and <code>SDL_DestroyWindow()</code>
            which I presume free the heap memory allocated
            by SDL_CreateWindow() and SDL_CreateRenderer.
            I say "presume" because all I see when looking
            through SDL_render.h is function prototypes; I
            can't actually find where the actual function
            definitions are.
        </p>
  
        <p>
            But one thing I do know is that SDL2 demands the
            use of pointers. And that it probably contains
            calls to <code>malloc()</code>. Which I think causes the leaks.
        </p>

        <p>
            <a href="https://github.com/DanteFalzone0/rotary-banana/blob/master/banana.hpp">
            banana.hpp</a>, on the other hand, contains no <code>malloc()</code>s;
            the heap is only used by the C++ libraries, which are
            sufficiently well-written that Valgrind reports no leaks
            when I run programs using banana.hpp. Perhaps I just haven't
            been writing C and C++ long enough, but I have never felt
            the need to put my data in the heap. I do know how to use
            <code>malloc()</code> and the all-powerful pointers (at least somewhat),
            but I often find that I can write a lot of code without either.
            (At the time of this writing, none of the code in my Github
            account calls <code>malloc()</code>.)
        </p>

        <p>
            My suggestion is probably borne entirely out of inexperience,
            and my opinion should be taken with a grain of salt. But it seems
            to me that pointers and heap usage cause all kinds of frustrating
            problems, and that most userland code can be written without using
            them at all. I would tentatively suggest that we should use as few
            pointers and as little heap space as possible in C and C++; we should
            always first try to do without them before resorting to them. This
            way I think we can greatly reduce the incidence of memory leaks.
        </p>

        <a href="https:dantefalzone0.github.io/index.html">Back to home page</a>
    </body>
</html>
